

$.fn.extend({onMouseWheel:function(t){$(this).on("mousewheel DOMMouseScroll",function(o){"function"==typeof o.preventDefault&&o.preventDefault();var n=o.originalEvent.detail,e=o.originalEvent.wheelDelta;return t(o,void 0===e?-n:e),!1})}}),$.fn.extend({panScrollBar:function(t){var o=$.extend({},{width:400,height:350,scroll_x_width:7,scroll_x_color:"#ddd",scroll_x_radius:7,scroll_x_thumb_color:"#aaa",scroll_x_thumb_radius:7,scroll_x_overflow:"auto",scroll_y_width:7,scroll_y_radius:7,scroll_y_color:"#ddd",scroll_y_thumb_color:"#aaa",scroll_y_thumb_radius:7,scroll_y_overflow:"auto",inertia_dis:100},t),n=$(this).html(),e='<div class="scroll-content"></div><div class="scroll-x-bar"><div class="scrollbar-x-thumb"></div></div>';e+='<div class="scroll-y-bar"><div class="scrollbar-y-thumb"></div></div><div class="scroll-over-layer"></div>',$(this).html(e);var i=$(this),s=$(this).find(".scroll-content");s.html(n);var a=$(this).find(".scroll-x-bar"),l=$(this).find(".scroll-y-bar"),c=a.find(".scrollbar-x-thumb"),r=l.find(".scrollbar-y-thumb"),d=$(this).find(".scroll-over-layer"),p=s.width(),f=s.height();$(this).css({width:o.width+"px",height:o.height+"px",overflow:"hidden"}),d.css({width:o.width+"px",height:o.height-o.scroll_y_width+"px"}),l.css({height:o.height+"px",width:o.scroll_y_width+"px",left:o.width-o.scroll_y_width+"px","background-color":o.scroll_y_color,"border-radius":o.scroll_y_radius+"px"}),a.css({height:o.scroll_x_width+"px",width:o.width+"px",top:o.height-o.scroll_x_width+"px","background-color":o.scroll_x_color,"border-radius":o.scroll_x_radius+"px"});var u={scrollY:!1,scrollX:!1};"auto"==o.scroll_y_overflow?(!function(){var t=0;if(f<=o.height)return void l.css("display","none");var n=f-o.height,e=1*o.height/f,a=parseInt(o.height*e),c=0,d=o.height-a;r.css({height:a+"px","background-color":o.scroll_y_thumb_color,"border-radius":o.scroll_y_thumb_radius+"px"});var p=null,u=2,h=0,g=d*u*1/n;function b(){t+=u,c+=g,u>0&&t>=h?(t=h,clearInterval(p)):u<0&&t<=h&&(t=h,clearInterval(p)),s.css({"margin-top":t+"px"}),r.css({"margin-top":c+"px"})}i.onMouseWheel(function(e,i){if(p&&clearInterval(p),i>0){if(u=Math.abs(u),h=t+o.inertia_dis,t>=0)return;h>0&&(h=0),g=-Math.abs(g),p=setInterval(b,1)}else{if(u=-Math.abs(u),h=t-o.inertia_dis,t<=-n)return;h<-n&&(h=-n),g=Math.abs(g),p=setInterval(b,1)}})}(),u.scrollY=!0):l.css("display","none"),"auto"==o.scroll_x_overflow?(!function(){console.log(p+"==="+o.width);var t=0;if(p<=o.width)return void a.css("display","none");var n=p-o.width,e=1*o.width/p,i=parseInt(o.width*e),l=0,r=o.width-i,d=r/n;c.css({width:i+"px","background-color":o.scroll_x_thumb_color,"border-radius":o.scroll_x_thumb_radius+"px"});var f=0,u=0,h=0,g=0,b=!1;c.on("mousedown",function(o){u=o.pageX,g=l,f=t,b=!0,s.addClass("not-selected")}),$(window).on("mousemove",function(o){b&&(h=o.pageX,t=f+(u-h)/d,(l=g+h-u)>=r?(l=r,t=-n):l<=0&&(l=0,t=0),c.css({"margin-left":l+"px"}),s.css({"margin-left":t+"px"}))}),$(window).on("mouseup",function(){b=!1,s.removeClass("not-selected")})}(),u.scrollX=!0):a.css("display","none")}}),$.fn.extend({selectorInit:function(t,o){var n=$.extend({},{width:280,expandType:"touch",optionsHeight:200,text:{tId:"demo",tName:"demo"},options:[{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"}]},t),e="";e+='<div class="pan-text" tId="'+n.text.tId+'">'+n.text.tName+"</div>",e+='<div class="pan-btn"><span></span></div>',e+='<div class="pan-scroll-box">';for(var i in n.options)e+='<div class="item-li" tId="'+n.options[i].tId+'">'+n.options[i].tName+"</div>";e+="</div>",$(this).html(e);var s=$(this);$(this).css("width",n.width+"px"),s.find(".pan-text").css({width:n.width-36+"px"});var a=$(this).find(".pan-scroll-box");a.panScrollBar({width:n.width,height:n.optionsHeight}),a.css({position:"absolute",left:"-1px",top:"29px","background-color":"#fff","z-index":"10001",border:"1px solid #80bc71",display:"none"}),"click"==n.expandType?s.on("click",function(){a.css("display","block")}):"touch"==n.expandType&&s.on("mouseenter",function(){a.css("display","block")}),s.on("mouseleave",function(){a.css("display","none")}),s.on("click",".item-li",function(){if(s.find(".pan-text").html($(this).html()),s.find(".pan-text").attr("tId",$(this).attr("tId")),a.css("display","none"),"function"==typeof o){var t=s.find(".pan-text").attr("tId"),n=s.find(".pan-text").html();o({tId:t,tName:n})}})}}),$.fn.extend({ZoomInit:function(t){var o=$(this);$(this).append('<div class="imageBg"></div>'),$imageBg=o.find("div.imageBg");var n=$(this).find("img");t.imageWidth&&"number"==typeof t.imageWidth&&n.css("width",t.imageWidth+"px"),t.imageHeight&&"number"==typeof t.imageHeight&&n.css("height",t.imageHeight+"px");var e=2;t.scale&&"number"==typeof t.scale&&(e=t.scale);var i=$(document).width(),s=$(document).height(),a=n.width(),l=n.height(),c=o.offset().left,r=o.offset().top,d=a*e,p=l*e;(d>=i||p>=s)&&(p=1*l/a*(d=.8*i));var f=(i-d)/2,u=(s-p)/2;o.css("width",a+"px"),o.css("height",l+"px"),$imageBg.css({width:"100%",height:"100%",position:"absolute",left:"0",top:"0","background-color":"#666",display:"none","z-index":1e3});var h=!1;function g(t){return{filter:"alpha(opacity=50)","-moz-opacity":t+="","-khtml-opacity":t,opacity:t}}n.on("click",function(){h?(c=o.offset().left,r=o.offset().top,$imageBg.animate(g(0),250,function(){$imageBg.css("display","none")}),n.animate({width:a+"px",height:l+"px",left:c+"px",top:r+"px"},250,function(){h=!1,n.css("position","static")})):(n.css("position","absolute"),n.css("z-index","1001"),console.log(n.offset().top),$imageBg.css("display","block"),$imageBg.css(g(0)),$imageBg.animate(g(.5),250),n.animate({width:d+"px",height:p+"px",left:f+"px",top:u+"px"},250,function(){h=!0}))}),n.on("mouseenter",function(){h?n.css("cursor","zoom-out"):n.css("cursor","zoom-in")})}}),$.fn.extend({panDateTimePicker:function(t){var o=[null,31,29,31,30,31,30,31,31,30,31,30,31],n=["日","一","二","三","四","五","六"],e=$.extend({},{start_year:1990,end_year:2030,format:"mm/dd/yyyy"},t),i=new Date,s=i.getFullYear(),a=i.getMonth()+1;i.getDate();$(this).html('<label class="date-show"></label>'),$(this).append('<div class="picker-box"></div>');var l='<div class="picker-header">';l+='<div class="left-btn"></div>',l+='<div class="year-selector"><a class="year-text">2017</a><span class="year-btn"></span>',l+='<div class="pan-scroll-box" id="year-list"></div></div>',l+='<div class="month-selector"><a class="month-text">09</a><span class="month-btn"></span>',l+='<div class="pan-scroll-box" id="month-list"></div></div>',l+='<div class="right-btn"></div>',l+="</div>",l+='<div class="picker-week">';for(var c=0;c<7;c++)l+="<span>"+n[c]+"</span>";l+="</div>",l+='<div class="picker-days"></div>',$(this).find(".picker-box").html(l),l="";var r=0;for(c=e.start_year;c<=e.end_year;c++)l+='<div class="item-li" style="width:60px;">'+c+"</div>",r++;$(this).find("#year-list").html(l),l="";for(c=1;c<=12;c++)l+='<div class="item-li" style="width:45px;">'+c+"</div>";$(this).find("#month-list").html(l);var d=$(this),p=$(this).find("#year-list"),f=240<20*r?240:20*r;p.panScrollBar({width:60,height:f}),p.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px","z-index":"20001",display:"none"});var u=$(this).find("#month-list");function h(t,n){d.find(".year-text").html(t),d.find(".month-text").html(n),o[2]=t%400==0||t%4==0&&t%100!=0?29:28;for(var e=new Date(t+"/"+n+"/"+1).getDay(),i="",s=o[n],a=0;a<7;a++)a<e&&(i+='<span style="visibility:hidden">&nbsp;</span>');for(a=1;a<=s;a++)i+="<span>"+a+"</span>";d.find(".picker-days").html(i)}u.panScrollBar({width:45,height:240}),u.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px","z-index":"20001",display:"none"}),h(s,a),$(this).find(".year-selector").on("mouseenter",function(){p.css("display","block")}),$(this).find(".year-selector").on("mouseleave",function(){p.css("display","none")}),p.on("click",".item-li",function(){var t=$(this).html(),o=d.find(".month-text").html();d.find(".year-text").html(t),p.css("display","none"),h(parseInt(t),parseInt(o))}),$(this).find(".month-selector").on("mouseenter",function(){u.css("display","block")}),$(this).find(".month-selector").on("mouseleave",function(){u.css("display","none")}),d.find(".picker-box").css({display:"none"}),u.on("click",".item-li",function(){var t=d.find(".year-text").html(),o=$(this).html();d.find(".month-text").html(o),u.css("display","none"),h(parseInt(t),parseInt(o))}),$(this).find(".picker-days").on("click","span",function(){var t=d.find(".year-text").html(),o=d.find(".month-text").html(),n=$(this).html();d.find(".date-show").html(function(t,o,n){"string"==typeof o&&(o=parseInt(o));"string"==typeof n&&(n=parseInt(n));o=o<10?"0"+o:o,n=n<10?"0"+n:n;var i="";"yyyy-mm-dd"==e.format?i=t+"-"+o+"-"+n:"mm/dd/yyyy"==e.format?i=o+"/"+n+"/"+t:"yyyy/mm/dd"==e.format&&(i=t+"/"+o+"/"+n);return i}(t,o,n)),d.find(".picker-box").css("display","none")}),$(this).find(".date-show").on("click",function(){d.find(".picker-box").css("display","block")})}});var panColorPickerObj=function(t,o,n){var e=t,s=$.extend({},{width:50,height:26,borderColor:"#333",iconBorderColor:"#333",iconColor:"#ff0000",pickerLeft:-1,pickerTop:25,showBtn:!0},o),a=180,l="";l+='<div class="picker_button"><div class="cur_color"></div><div class="arrow_btn"></div></div>',l+='<div class="picker_box">',l+='<div class="panel_box"><canvas class="color_canvas" width="'+a+'" height="'+a+'"></canvas>',l+='<div class="canvas_point"></div>',l+='<div class="rainbow_panel"><span></span></div></div>',l+='<div class="op_box"><div class="pre_color"></div><div class="now_color"></div>',l+='<div class="rgb_value">255,0,0</div><div class="hex_value">#ff0000</div>',l+='<div class="cancel_btn">取消</div><div class="ok_btn">确定</div></div>',l+="</div>",e.append(l);var c=e.find(".picker_button"),r=e.find(".picker_box"),d=e.find(".arrow_btn"),p=e.find(".color_canvas"),f=e.find(".canvas_point"),u=e.find(".rainbow_panel"),h=e.find(".rainbow_panel").find("span"),g=e.find(".rgb_value"),b=e.find(".hex_value"),m=e.find(".cur_color"),v=e.find(".pre_color"),x=e.find(".now_color"),_=e.find(".ok_btn"),y=e.find(".cancel_btn"),k="block";0==s.showBtn&&(k="none"),c.css({"border-color":s.borderColor,width:s.width+"px",height:s.height+"px",display:k}),r.css({left:s.pickerLeft+"px",top:s.pickerTop+"px",display:"none"}),m.css({"background-color":s.iconColor,height:s.height-6+"px","border-color":s.iconBorderColor}),v.css("background-color",s.iconColor);for(var w=["#ff0000","#FF8000","#ffff00","#00ff00","#00ffff","#0000ff","#8000ff"],I=[],C=0,B=1;B<7;B++)gradient_list=Y(w[B-1],w[B],30),$.merge(I,gradient_list,!1);C=I.length;var N=a,P=0,D=0,S=0,F={r:0,g:0,b:0},T={r:255,g:0,b:0},M=p[0].getContext("2d"),z=M.createImageData(a,a);function O(t){if(!isNaN(t)){var o=parseInt(1*t/N*C);R({r:255,g:255,b:255},T=I[o=(o=o<0?0:o)>C-1?C-1:o],{r:0,g:0,b:0},a)}}function j(t,o){if(!isNaN(o)&&!isNaN(t)){var n,e,i,s,l,c,r,d,p,f,u,h,m=(n={r:255,g:255,b:255},e=T,i={r:0,g:0,b:0},s=a,l=D,c=P,r=parseInt(1*(e.r-n.r)/s*l+n.r),d=parseInt(1*(e.g-n.g)/s*l+n.g),p=parseInt(1*(e.b-n.b)/s*l+n.b),f=parseInt(1*(i.r-r)/s*c+r),u=parseInt(1*(i.g-d)/s*c+d),h=parseInt(1*(i.b-p)/s*c+p),f=f>255?255:f,u=u>255?255:u,h=h>255?255:h,{r:f=f<0?0:f,g:u=u<0?0:u,b:h=h<0?0:h});F=m,g.html(m.r+","+m.g+","+m.b),x.css("background-color",W(m.r,m.g,m.b)),b.html(W(m.r,m.g,m.b))}}function R(t,o,n,e){for(var i=[],s=1*(o.r-t.r)/e,a=1*(o.g-t.g)/e,l=1*(o.b-t.b)/e,c=0;c<e;c++)i.push({r:parseInt(t.r+s*c),g:parseInt(t.g+a*c),b:parseInt(t.b+l*c)});for(c=0;c<e;c++)for(var r=0;r<e;r++){var d=4*c*e+4*r;z.data[d]=parseInt(1*(n.r-i[r].r)/e*c+i[r].r),z.data[d+1]=parseInt(1*(n.g-i[r].g)/e*c+i[r].g),z.data[d+2]=parseInt(1*(n.b-i[r].b)/e*c+i[r].b),z.data[d+3]=255}M.putImageData(z,0,0)}function E(t){var o=[];return o.push(parseInt(t.substr(1,2),16)),o.push(parseInt(t.substr(3,2),16)),o.push(parseInt(t.substr(5,2),16)),o}function W(t,o,n){var e=t.toString(16),i=o.toString(16),s=n.toString(16);return"#"+(e=1==e.length?"0"+e:e)+(i=1==i.length?"0"+i:i)+(s=1==s.length?"0"+s:s)}function Y(t,o,n,e){var s=E(t),a=E(o),l=1*(a[0]-s[0])/n,c=1*(a[1]-s[1])/n,r=1*(a[2]-s[2])/n,d=[];for(i=0;i<n;i++){var p=parseInt(s[0]+l*i),f=parseInt(s[1]+c*i),u=parseInt(s[2]+r*i);p=p>255?255:p,f=f>255?255:f,u=u>255?255:u,1==e?d.push(W(p,f,u)):d.push({r:p,g:f,b:u})}return d}R({r:255,g:255,b:255},T,{r:0,g:0,b:0},180),function(){function t(t){D=t.pageX-p.offset().left,P=t.pageY-p.offset().top,D=D<0?0:D,P=P<0?0:P;var o=D>a-3?a-3:D-2,n=P>a-3?a-3:P-2;D=D>a?a:D,P=P>a?a:P,f.css({top:n+"px",left:o+"px"}),j(D,P)}function o(t){document.onmousemove=null,document.onmouseup=null,document.onselectstart=null}f.on("mousedown",function(t){p.mousedown()}),p.on("mousedown",function(n){D=n.pageX-p.offset().left,P=n.pageY-p.offset().top,f.css({top:P+"px",left:D+"px"}),document.onmousemove=t,document.onmouseup=o,document.onselectstart=function(){return!1},j(D,P)})}(),function(){function t(t){S=(S=(S=t.pageY-p.offset().top)<0?0:S)>N-4?N-4:S,h.css("top",S+"px"),O(S),j(D,P)}function o(t){document.onmousemove=null,document.onmouseup=null,document.onselectstart=null}h.on("mousedown",function(t){u.mousedown()}),u.on("mousedown",function(n){S=(S=(S=n.pageY-p.offset().top)<0?0:S)>N-4?N-4:S,document.onmousemove=t,document.onmouseup=o,document.onselectstart=function(){return!1},h.css("top",S+"px"),O(S),j(D,P)})}(),_.on("click",function(){"function"==typeof n&&(o={hex:b.html(),rgb:F},n(o),r.css({display:"none"}),m.css("background-color",b.html()),v.css("background-color",b.html()))}),y.on("click",function(){r.css({display:"none"})}),m.click(function(){r.css({display:"block"})}),d.click(function(){m.click()}),this.showPicker=function(){r.css({display:"block"})},this.hidePicker=function(){r.css({display:"none"})}};$.fn.extend({panColorPicker:function(t,o){return new panColorPickerObj(this,t,o)}});var panEditFrameObj=function(t,o,n){var e=$.extend({},{width:810,height:500},o),i=t,s=["宋体","黑体","新宋体","仿宋","楷体","幼圆","Consolas","Courier New","Arial","Georgia","Impact","New Roman"],a={"初号":"9","一号":"8","二号":"7","三号":"6","小三":"5","四号":"4","小四":"3","五号":"2","小五":"1"},l='<div class="tool">';l+='<div class="first_row"><select class="family"></select>',l+='<select class="fontsize"></select>',l+='<button class="bold" title="粗体">B</button>',l+='<button class="italic" title="斜体">I</button>',l+='<button class="text_left" title="左对齐" tabindex = "0"></button>',l+='<button class="text_center" title="居中对齐"></button>',l+='<button class="text_right" title="右对齐"></button>',l+='<button class="reply_left" title="撤销"></button>',l+='<button class="reply_right" title="恢复撤销"></button>',l+='<button class="indent" title="增加缩进"></button>',l+='<button class="outdent" title="减少缩进"></button>',l+='<button class="underline" title="下划线"></button>',l+='<button class="deleteline" title="删除线"></button>',l+='<button class="remove_format" title="清除格式"></button>',l+='<button class="code_format" title="代码格式化"></button>',l+='<button class="table" title="表格"></button>',l+="</div>",l+='<div class="second_row">',l+='<button class="foreColor" title="字体颜色"></button><div class="pan-color-picker" id="forePicker" style="position: absolute"></div>',l+='<button class="backColor" title="字体背景颜色"></button><div class="pan-color-picker" id="backPicker" style="position: absolute"></div>',l+='<button class="link" title="超链接"></button>',l+='<button class="preview" title="预览"></button>',l+="</div>",l+="</div>",e.width=e.width<800?800:e.width,e.height=e.height<400?400:e.height,i.css({width:"100%",height:e.height+"px"});var c=i.find("iframe");c.before(l),c.css({height:e.height-100+"px"}),l='<div class="table_dialog">',l+='<div class="dialog_header"><span class="dialog_title">插入表格</span><span class="dialog_close">×</span></div>',l+='<div class="table_content"><input type="text" class="table_rows" value="3"><span>行</span><input type="text" class="table_cols" value="3"><span>列</span></div>',l+='<div class="dialog_ok_btn">确定</div>',i.append(l),l='<div class="code_dialog">',l+='<div class="dialog_header"><span class="dialog_title">插入代码</span><span class="dialog_close">×</span></div><textarea class="dialog_content" spellcheck="false"></textarea>',l+='<div class="dialog_ok_btn">确定</div>',i.append(l),l='<div class="link_dialog">',l+='<div class="dialog_header"><span class="dialog_title">插入超链接</span><span class="dialog_close">×</span></div>',l+='<div class="link_content"><span>链接名字:</span><input type="text" class="link_name"/><br/><span>链接Url:</span><input type="text" class="link_id"/></div>',l+='<div class="dialog_ok_btn">确定</div>',i.append(l),l='<div class="previewGg"><div class="previewContent"></div></div>',i.append(l);var r=i.find(".family"),d=i.find(".fontsize"),p=i.find(".bold"),f=i.find(".italic"),u=i.find(".text_left"),h=i.find(".text_center"),g=i.find(".text_right"),b=i.find(".reply_left"),m=i.find(".reply_right"),v=i.find(".indent"),x=i.find(".outdent"),_=i.find(".underline"),y=i.find(".deleteline"),k=i.find(".remove_format"),w=i.find(".code_format"),I=i.find(".table"),C=i.find(".foreColor"),B=i.find(".backColor"),N=i.find("#forePicker"),P=i.find("#backPicker"),D=i.find(".link"),S=i.find(".preview"),F=i.find(".code_dialog"),T=F.find(".dialog_content"),M=F.find(".dialog_close"),z=F.find(".dialog_ok_btn"),O=i.find(".link_dialog"),j=O.find(".link_name"),R=O.find(".link_id"),E=O.find(".dialog_close"),W=O.find(".dialog_ok_btn"),Y=i.find(".previewGg"),H=i.find(".previewContent"),X=i.find(".table_dialog"),A=X.find(".table_rows"),G=X.find(".table_cols"),L=X.find(".dialog_close"),U=X.find(".dialog_ok_btn");console.log(N.html());var Z=N.panColorPicker({showBtn:!1},function(t){Q.document.execCommand("ForeColor",!1,t.hex),Q.focus()}),q=P.panColorPicker({showBtn:!1},function(t){Q.document.execCommand("BackColor",!1,t.hex),Q.focus()});N.css({left:"1px",top:"1px"}),P.css({left:"39px",top:"1px"}),l="";for(var J in s)l+='<option value ="'+s[J]+'">'+s[J]+"</option>";r.html(l),l="";for(var K in a)l+='<option value ="'+a[K]+'">'+K+"</option>";d.html(l);var Q=c[0].contentWindow,V=c[0].contentWindow.document;function tt(t){return t}console.log(Q),V.body.contentEditable=!0,$(V.body).attr("spellcheck","false"),V.designMode="on",Q.focus(),this.getFrameBodyHtml=function(){return $(V.body).html()},r.change(function(){Q.document.execCommand("FontName",!1,$(this).val()),Q.focus()}),d.change(function(){Q.document.execCommand("FontSize",!1,parseInt($(this).val())),Q.focus()}),p.on("click",function(){Q.document.execCommand("Bold",!1,null),Q.focus()}),f.on("click",function(){Q.document.execCommand("Italic",!1,null),Q.focus()}),u.unbind("focus"),u.on("click",function(){Q.document.execCommand("justifyLeft",!1,null),Q.focus()}),h.on("click",function(){Q.document.execCommand("justifyCenter",!1,null),Q.focus()}),g.on("click",function(){Q.document.execCommand("justifyRight",!1,null),Q.focus()}),b.on("click",function(){Q.document.execCommand("undo",!1,null),Q.focus()}),m.on("click",function(){Q.document.execCommand("redo",!1,null),Q.focus()}),v.on("click",function(){Q.document.execCommand("indent",!1,null),Q.focus()}),x.on("click",function(){Q.document.execCommand("outdent",!1,null),Q.focus()}),_.on("click",function(){Q.document.execCommand("underline",!1,null),Q.focus()}),y.on("click",function(){Q.document.execCommand("strikeThrough",!1,"1"),Q.focus()}),k.on("click",function(){Q.document.execCommand("removeFormat",!1,"1"),Q.focus()}),w.on("click",function(){T.val(""),F.css("display","block")}),C.on("click",function(){Z.showPicker()}),B.on("click",function(){q.showPicker()}),M.on("click",function(){F.css("display","none")}),z.on("click",function(){F.css("display","none"),Q.focus();var t=Q.getSelection().getRangeAt(0),o=t.createContextualFragment(function(t){for(var o='<ol style="font-size: 13px;white-space: pre-wrap;font-family: Consolas;border: 1px solid #ddd" spellcheck="false">',n=t.split("\n"),e=0;e<n.length;e++)o+=e%2==1?'<li style="height:20px;line-height:20px;background-color: #f8f8f8;border-left:2px solid #8DB02E;padding-left: 10px;">'+tt(n[e])+"</li>":'<li style="height:20px;line-height:20px;background-color: #ffffff;border-left:2px solid #8DB02E;padding-left: 10px;">'+tt(n[e])+"</li>";return o+="</ol>"}(T.val()));t.insertNode(o),$(V.body).append("<br/>")}),I.on("click",function(){console.log("table.clok"),X.css("display","block")}),L.on("click",function(){X.css("display","none")}),U.on("click",function(){X.css("display","none");var t=parseInt(A.val()),o=parseInt(G.val());Q.focus();var n=Q.getSelection().getRangeAt(0),e=n.createContextualFragment("<br/>"+function(t,o,n){var e="";"left"==n?e+='<ol><table style="width:800px;border:1px solid #aaa;" cellspacing="0">':"center"==n&&(e+='<table style="width:800px;border:1px solid #aaa;" cellspacing="0">');for(var i=0;i<t;i++){e+=i%2==0?'<tr style="background-color: #f8f8f8">':'<tr style="background-color: #ffffff">';for(var s=0;s<o;s++)e+=0==s?'<td style="width:100px;height:30px;border-left:0px solid #d5d5d5;color:#666"></td>':'<td style="width:100px;height:30px;border-left:1px solid #d5d5d5;color:#666"></td>';e+="</tr>"}return e+="</table></ol>"}(t,o,"center"));n.insertNode(e),$(V.body).append("<br/>")}),D.on("click",function(){O.css("display","block"),j.val(""),R.val("")}),E.on("click",function(){O.css("display","none")}),W.on("click",function(){Q.focus();var t,o,n,e=Q.getSelection().getRangeAt(0),i=e.createContextualFragment((t=j.val(),o=R.val(),n="","string"==typeof o&&-1==o.indexOf("https://")&&-1==o.indexOf("http://")&&(n+="http://"+o),'<a href="'+n+'" target="_blank" >'+t+"</a>"));e.insertNode(i),O.css("display","none")}),S.on("click",function(){Y.css("display","block"),H.html($(V.body).html()),$("html,body").css({overflow:"hidden"})}),Y.on("click",function(){$(this).css("display","none"),$("html,body").css({overflow:"auto"})}),H.on("click",function(t){t.stopPropagation()})};$.fn.extend({panEditFrame:function(t,o){return new panEditFrameObj(this,t,o)}});var panBlogsDialogObj=function(t,o,n){var e=t,i=$.extend({},{width:500,height:300,top:150},o),s=e.find(".pan-blogs-dialog-content");function a(){e.fadeOut(300)}s.on("click",function(t){t.stopPropagation()}),e.click(function(){a()}),this.showDialog=function(){e.fadeIn(200),s.css({width:i.width+100+"px",height:i.height+100+"px",margin:i.top-50+"px auto"}),s.animate({width:i.width+"px",height:i.height+"px",margin:i.top+"px auto"},200)},this.hideDialog=function(){a()}};$.fn.extend({panBlogsDialog:function(t,o){return new panBlogsDialogObj(this,t,o)}});var panRandomCodeObj=function(t,o,n){var e=t,i=($.extend({},{},o),e[0]),s=i.width,a=i.height,l=i.getContext("2d");function c(t,o){return Math.floor(Math.random()*(o-t))+t}this.setDrawCode=function(t){!function(t){for(var o=["55px","30px","35px","40px","45px","50px","25px"],n=["Arial","Times New Roman","Georgia","Serif","Microsoft YaHei"],e=0;e<8;e++)l.beginPath(),l.strokeStyle="rgb("+c(0,255)+","+c(0,255)+","+c(0,255)+")",l.moveTo(c(0,s),c(0,a)),l.lineTo(c(0,s),c(0,a)),l.closePath(),l.stroke();for(var e=0;e<50;e++){l.beginPath(),l.lineWidth=2,l.strokeStyle="rgb("+c(0,255)+","+c(0,255)+","+c(0,255)+")";var i=c(0,s),r=c(0,a);l.moveTo(i,r),l.lineTo(i+2,r+2),l.closePath(),l.stroke()}for(var e=0;e<4;e++){var d=t.substr(e,1),p=c(0,20);l.fillStyle="rgb("+c(0,255)+","+c(0,255)+","+c(0,255)+")",l.strokeStyle="rgb("+c(0,255)+","+c(0,255)+","+c(0,255)+")",l.font="bold "+o[c(0,6)]+" "+n[c(0,5)],p%2==0?l.strokeText(d,36*e+13,50):l.fillText(d,36*e+13,50)}}(t)},this.clearDrawCode=function(){l.clearRect(0,0,s,a)}};$.fn.extend({panRandomCode:function(t,o){return new panRandomCodeObj(this,t,o)}});var panPages=function(t,o,n){var e=t,i=$.extend({},{cur_page:18,total_page:20,background_color:"#ff00ff",color:"#fff",border_color:"#ff00ff",point_color:"#333"},o);e.append('<button class="first_page">首页</button>'),e.append('<button class="pre_page">上一页</button>');var s=1,a=i.total_page;i.cur_page-4>=1&&i.cur_page+4<=i.total_page?(s=i.cur_page-4,a=i.cur_page+4):i.cur_page-4>=1&&i.cur_page+4>i.total_page?(a=i.total_page,s=i.total_page-7):i.cur_page-4<1&&i.cur_page+4<=i.total_page?(s=1,a=8):(s=1,a=i.total_page),s=s<1?1:s,a=a>i.total_page?i.total_page:a;for(var l=1;l<=i.total_page;l++)e.append('<button class="'+l+'">'+l+"</button>"),1==l&&s>2&&e.append('<span class="pre_point">...</span>'),l==i.total_page-1&&a<i.total_page-1&&e.append('<span class="next_point">...</span>'),i.cur_page==l?r(e.find("."+l)):c(e.find("."+l)),(l<s||l>a)&&e.find("."+l).css("display","none"),1!=l&&l!=i.total_page||e.find("."+l).css("display","inline-block");function c(t){t.css({"background-color":i.background_color,color:i.color,"border-color":i.border_color})}function r(t){t.css({"background-color":i.color,color:"#fff","border-color":i.border_color})}e.append('<button class="next_page">下一页</button>'),e.append('<button class="last_page">尾页</button>'),c(e.find(".first_page")),c(e.find(".pre_page")),c(e.find(".next_page")),c(e.find(".last_page")),e.find("span").css({color:i.point_color}),e.on("mouseleave","button",function(){$(this).attr("class")!=i.cur_page.toString()&&c($(this))}),e.on("mouseenter","button",function(){r($(this))}),e.on("click","button",function(){"function"==typeof n&&n($(this).html())})};