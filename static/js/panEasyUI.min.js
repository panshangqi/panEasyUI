
$.fn.extend({onMouseWheel:function(a){$(this).on("mousewheel DOMMouseScroll",function(b){"function"==typeof b.preventDefault&&b.preventDefault();var c=b.originalEvent.detail,d=b.originalEvent.wheelDelta,e="undefined"==typeof d?-c:d;return a(b,e),!1})}}),$.fn.extend({panScrollBar:function(a){function b(){function a(){b+=o,g+=r,o>0&&b>=q?(b=q,clearInterval(l)):0>o&&q>=b&&(b=q,clearInterval(l)),i.css({"margin-top":b+"px"}),m.css({"margin-top":g+"px"})}var b=0;if(p<=e.height)return void k.css("display","none");var c=p-e.height,d=1*e.height/p,f=parseInt(e.height*d),g=0,j=e.height-f;m.css({height:f+"px","background-color":e.scroll_y_thumb_color,"border-radius":e.scroll_y_thumb_radius+"px"});var l=null,n=1,o=2,q=0,r=j*o*1/c;h.onMouseWheel(function(d,f){if(l&&clearInterval(l),f>0){if(o=Math.abs(o),q=b+e.inertia_dis,b>=0)return;q>0&&(q=0),r=-Math.abs(r),l=setInterval(a,n)}else{if(o=-Math.abs(o),q=b-e.inertia_dis,-c>=b)return;-c>q&&(q=-c),r=Math.abs(r),l=setInterval(a,n)}})}function c(){console.log(o+"==="+e.width);var a=0;if(o<=e.width)return void j.css("display","none");var b=o-e.width,c=1*e.width/o,d=parseInt(e.width*c),f=0,g=e.width-d,h=g/b;l.css({width:d+"px","background-color":e.scroll_x_thumb_color,"border-radius":e.scroll_x_thumb_radius+"px"});var k=0,m=0,n=0,p=0,q=!1;l.on("mousedown",function(b){m=b.pageX,p=f,k=a,q=!0,i.addClass("not-selected")}),$(window).on("mousemove",function(c){q&&(n=c.pageX,f=p+n-m,a=k+(m-n)/h,f>=g?(f=g,a=-b):0>=f&&(f=0,a=0),l.css({"margin-left":f+"px"}),i.css({"margin-left":a+"px"}))}),$(window).on("mouseup",function(){q=!1,i.removeClass("not-selected")})}var d={width:400,height:350,scroll_x_width:7,scroll_x_color:"#ddd",scroll_x_radius:7,scroll_x_thumb_color:"#aaa",scroll_x_thumb_radius:7,scroll_x_overflow:"auto",scroll_y_width:7,scroll_y_radius:7,scroll_y_color:"#ddd",scroll_y_thumb_color:"#aaa",scroll_y_thumb_radius:7,scroll_y_overflow:"auto",inertia_dis:100},e=$.extend({},d,a),f=$(this).html(),g='<div class="scroll-content"></div><div class="scroll-x-bar"><div class="scrollbar-x-thumb"></div></div>';g+='<div class="scroll-y-bar"><div class="scrollbar-y-thumb"></div></div><div class="scroll-over-layer"></div>',$(this).html(g);var h=$(this),i=$(this).find(".scroll-content");i.html(f);var j=$(this).find(".scroll-x-bar"),k=$(this).find(".scroll-y-bar"),l=j.find(".scrollbar-x-thumb"),m=k.find(".scrollbar-y-thumb"),n=$(this).find(".scroll-over-layer"),o=i.width(),p=i.height();$(this).css({width:e.width+"px",height:e.height+"px",overflow:"hidden"}),n.css({width:e.width+"px",height:e.height-e.scroll_y_width+"px"}),k.css({height:e.height+"px",width:e.scroll_y_width+"px",left:e.width-e.scroll_y_width+"px","background-color":e.scroll_y_color,"border-radius":e.scroll_y_radius+"px"}),j.css({height:e.scroll_x_width+"px",width:e.width+"px",top:e.height-e.scroll_x_width+"px","background-color":e.scroll_x_color,"border-radius":e.scroll_x_radius+"px"});var q={scrollY:!1,scrollX:!1};"auto"==e.scroll_y_overflow?(b(),q.scrollY=!0):k.css("display","none"),"auto"==e.scroll_x_overflow?(c(),q.scrollX=!0):j.css("display","none")}}),$("#test_scroll").panScrollBar({width:600,scroll_y_overflow:"auto"}),$.fn.extend({selectorInit:function(a,b){var c={width:280,expandType:"touch",optionsHeight:200,text:{tId:"demo",tName:"demo"},options:[{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"}]},d=$.extend({},c,a),e="";e+='<div class="pan-text" tId="'+d.text.tId+'">'+d.text.tName+"</div>",e+='<div class="pan-btn"><span></span></div>',e+='<div class="pan-scroll-box">';for(var f in d.options)e+='<div class="item-li" tId="'+d.options[f].tId+'">'+d.options[f].tName+"</div>";e+="</div>",$(this).html(e);var g=$(this);$(this).css("width",d.width+"px"),g.find(".pan-text").css({width:d.width-36+"px"});var h=$(this).find(".pan-scroll-box");h.panScrollBar({width:d.width,height:d.optionsHeight}),h.css({position:"absolute",left:"-1px",top:"29px","background-color":"#fff","z-index":"10001",border:"1px solid #80bc71",display:"none"}),"click"==d.expandType?g.on("click",function(){h.css("display","block")}):"touch"==d.expandType&&g.on("mouseenter",function(){h.css("display","block")}),g.on("mouseleave",function(){h.css("display","none")}),g.on("click",".item-li",function(){if(g.find(".pan-text").html($(this).html()),g.find(".pan-text").attr("tId",$(this).attr("tId")),h.css("display","none"),"function"==typeof b){var a=g.find(".pan-text").attr("tId"),c=g.find(".pan-text").html(),d={tId:a,tName:c};b(d)}})}}),$("#test_selector").selectorInit({width:280,expandType:"touch",optionsULHeight:360,text:{tId:"上海",tName:"上海"},options:[{tId:"上海",tName:"上海"},{tId:"北京",tName:"北京"},{tId:"深圳",tName:"深圳"},{tId:"江苏",tName:"江苏"},{tId:"山东",tName:"山东"},{tId:"广东",tName:"广东"},{tId:"江西",tName:"江西"},{tId:"南京",tName:"南京"},{tId:"江苏",tName:"江苏"},{tId:"陕西",tName:"陕西"},{tId:"河南",tName:"河南"},{tId:"河北",tName:"河北"},{tId:"山西",tName:"山西"},{tId:"天津",tName:"天津"}]},function(a){console.log(JSON.stringify(a))}),$("#test_selector1").selectorInit({width:120,text:{tId:"火星",tName:"火星"},options:[{tId:"火星",tName:"火星"},{tId:"木星",tName:"木星"},{tId:"水星",tName:"水星"},{tId:"金星",tName:"金星"},{tId:"天王星",tName:"天王星"},{tId:"海王星",tName:"海王星"},{tId:"冥王星",tName:"冥王星"},{tId:"地球",tName:"地球"},{tId:"太阳",tName:"太阳"}]},function(a){console.log(JSON.stringify(a))}),$.fn.extend({ZoomInit:function(a){function b(a){a+="";var b={filter:"alpha(opacity=50)","-moz-opacity":a,"-khtml-opacity":a,opacity:a};return b}var c=$(this),d='<div class="imageBg"></div>';$(this).append(d),$imageBg=c.find("div.imageBg");var e=$(this).find("img");a.imageWidth&&"number"==typeof a.imageWidth&&e.css("width",a.imageWidth+"px"),a.imageHeight&&"number"==typeof a.imageHeight&&e.css("height",a.imageHeight+"px");var f=2;a.scale&&"number"==typeof a.scale&&(f=a.scale);var g=$(document).width(),h=$(document).height(),i=e.width(),j=e.height(),k=c.offset().left,l=c.offset().top,m=i*f,n=j*f;(m>=g||n>=h)&&(m=.8*g,n=1*j/i*m);var o=(g-m)/2,p=(h-n)/2;c.css("width",i+"px"),c.css("height",j+"px"),$imageBg.css({width:"100%",height:"100%",position:"absolute",left:"0",top:"0","background-color":"#666",display:"none","z-index":1e3});var q=!1;e.on("click",function(){q?(k=c.offset().left,l=c.offset().top,$imageBg.animate(b(0),250,function(){$imageBg.css("display","none")}),e.animate({width:i+"px",height:j+"px",left:k+"px",top:l+"px"},250,function(){q=!1,e.css("position","static")})):(e.css("position","absolute"),e.css("z-index","1001"),console.log(e.offset().top),$imageBg.css("display","block"),$imageBg.css(b(0)),$imageBg.animate(b(.5),250),e.animate({width:m+"px",height:n+"px",left:o+"px",top:p+"px"},250,function(){q=!0}))}),e.on("mouseenter",function(){q?e.css("cursor","zoom-out"):e.css("cursor","zoom-in")})}}),$("#test_zoomify").ZoomInit({imageWidth:360,imageHeight:"auto",scale:3.1}),$("#test_zoomify1").ZoomInit({imageWidth:100,imageHeight:"auto",scale:3.1}),$.fn.extend({panDateTimePicker:function(a){function b(a,b){o.find(".year-text").html(a),o.find(".month-text").html(b),a%400==0||a%4==0&&a%100!=0?e[2]=29:e[2]=28;for(var d=c(a,b,1),f="",g=e[b],h=0;7>h;h++)d>h&&(f+='<span style="visibility:hidden">&nbsp;</span>');for(var h=1;g>=h;h++)f+="<span>"+h+"</span>";o.find(".picker-days").html(f)}function c(a,b,c){var d=new Date(a+"/"+b+"/"+c),e=d.getDay();return e}function d(a,b,c){"string"==typeof b&&(b=parseInt(b)),"string"==typeof c&&(c=parseInt(c)),b=10>b?"0"+b:b,c=10>c?"0"+c:c;var d="";return"yyyy-mm-dd"==h.format?d=a+"-"+b+"-"+c:"mm/dd/yyyy"==h.format?d=b+"/"+c+"/"+a:"yyyy/mm/dd"==h.format&&(d=a+"/"+b+"/"+c),d}var e=[null,31,29,31,30,31,30,31,31,30,31,30,31],f=["日","一","二","三","四","五","六"],g={start_year:1990,end_year:2030,format:"mm/dd/yyyy"},h=$.extend({},g,a),i=new Date,j=i.getFullYear(),k=i.getMonth()+1;i.getDate();$(this).html('<label class="date-show"></label>'),$(this).append('<div class="picker-box"></div>');var l='<div class="picker-header">';l+='<div class="left-btn"></div>',l+='<div class="year-selector"><a class="year-text">2017</a><span class="year-btn"></span>',l+='<div class="pan-scroll-box" id="year-list"></div></div>',l+='<div class="month-selector"><a class="month-text">09</a><span class="month-btn"></span>',l+='<div class="pan-scroll-box" id="month-list"></div></div>',l+='<div class="right-btn"></div>',l+="</div>",l+='<div class="picker-week">';for(var m=0;7>m;m++)l+="<span>"+f[m]+"</span>";l+="</div>",l+='<div class="picker-days"></div>',$(this).find(".picker-box").html(l),l="";for(var n=0,m=h.start_year;m<=h.end_year;m++)l+='<div class="item-li" style="width:60px;">'+m+"</div>",n++;$(this).find("#year-list").html(l),l="";for(var m=1;12>=m;m++)l+='<div class="item-li" style="width:45px;">'+m+"</div>";$(this).find("#month-list").html(l);var o=$(this),p=$(this).find("#year-list"),q=20*n>240?240:20*n;p.panScrollBar({width:60,height:q}),p.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px","z-index":"20001",display:"none"});var r=$(this).find("#month-list");r.panScrollBar({width:45,height:240}),r.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px","z-index":"20001",display:"none"}),b(j,k),$(this).find(".year-selector").on("mouseenter",function(){p.css("display","block")}),$(this).find(".year-selector").on("mouseleave",function(){p.css("display","none")}),p.on("click",".item-li",function(){var a=$(this).html(),c=o.find(".month-text").html();o.find(".year-text").html(a),p.css("display","none"),b(parseInt(a),parseInt(c))}),$(this).find(".month-selector").on("mouseenter",function(){r.css("display","block")}),$(this).find(".month-selector").on("mouseleave",function(){r.css("display","none")}),o.find(".picker-box").css({display:"none"}),r.on("click",".item-li",function(){var a=o.find(".year-text").html(),c=$(this).html();o.find(".month-text").html(c),r.css("display","none"),b(parseInt(a),parseInt(c))}),$(this).find(".picker-days").on("click","span",function(){var a=o.find(".year-text").html(),b=o.find(".month-text").html(),c=$(this).html();o.find(".date-show").html(d(a,b,c)),o.find(".picker-box").css("display","none")}),$(this).find(".date-show").on("click",function(){o.find(".picker-box").css("display","block")})}}),$("#test_datetime").panDateTimePicker({start_year:1990,end_year:2030,format:"mm/dd/yyyy"}),$("#test_pansq").panScrollBar({height:100});