

$.fn.extend({onMouseWheel:function(t){$(this).on("mousewheel DOMMouseScroll",function(i){"function"==typeof i.preventDefault&&i.preventDefault();var e=i.originalEvent.detail,s=i.originalEvent.wheelDelta;return t(i,void 0===s?-e:s),!1})}}),$.fn.extend({panScrollBar:function(t){var i=$.extend({},{width:400,height:350,scroll_x_width:7,scroll_x_color:"#ddd",scroll_x_radius:7,scroll_x_thumb_color:"#aaa",scroll_x_thumb_radius:7,scroll_x_overflow:"auto",scroll_y_width:7,scroll_y_radius:7,scroll_y_color:"#ddd",scroll_y_thumb_color:"#aaa",scroll_y_thumb_radius:7,scroll_y_overflow:"auto",inertia_dis:100},t),e=$(this).html(),s='<div class="scroll-content"></div><div class="scroll-x-bar"><div class="scrollbar-x-thumb"></div></div>';s+='<div class="scroll-y-bar"><div class="scrollbar-y-thumb"></div></div><div class="scroll-over-layer"></div>',$(this).html(s);var o=$(this),n=$(this).find(".scroll-content");n.html(e);var a=$(this).find(".scroll-x-bar"),l=$(this).find(".scroll-y-bar"),d=a.find(".scrollbar-x-thumb"),r=l.find(".scrollbar-y-thumb"),c=$(this).find(".scroll-over-layer"),h=n.width(),p=n.height();$(this).css({width:i.width+"px",height:i.height+"px",overflow:"hidden"}),c.css({width:i.width+"px",height:i.height-i.scroll_y_width+"px"}),l.css({height:i.height+"px",width:i.scroll_y_width+"px",left:i.width-i.scroll_y_width+"px","background-color":i.scroll_y_color,"border-radius":i.scroll_y_radius+"px"}),a.css({height:i.scroll_x_width+"px",width:i.width+"px",top:i.height-i.scroll_x_width+"px","background-color":i.scroll_x_color,"border-radius":i.scroll_x_radius+"px"});var m={scrollY:!1,scrollX:!1};"auto"==i.scroll_y_overflow?(!function(){function t(){e+=f,c+=x,f>0&&e>=u?(e=u,clearInterval(m)):f<0&&e<=u&&(e=u,clearInterval(m)),n.css({"margin-top":e+"px"}),r.css({"margin-top":c+"px"})}var e=0;if(p<=i.height)l.css("display","none");else{var s=p-i.height,a=1*i.height/p,d=parseInt(i.height*a),c=0,h=i.height-d;r.css({height:d+"px","background-color":i.scroll_y_thumb_color,"border-radius":i.scroll_y_thumb_radius+"px"});var m=null,f=2,u=0,x=h*f*1/s;o.onMouseWheel(function(o,n){if(m&&clearInterval(m),n>0){if(f=Math.abs(f),u=e+i.inertia_dis,e>=0)return;u>0&&(u=0),x=-Math.abs(x),m=setInterval(t,1)}else{if(f=-Math.abs(f),u=e-i.inertia_dis,e<=-s)return;u<-s&&(u=-s),x=Math.abs(x),m=setInterval(t,1)}})}}(),m.scrollY=!0):l.css("display","none"),"auto"==i.scroll_x_overflow?(!function(){console.log(h+"==="+i.width);var t=0;if(h<=i.width)a.css("display","none");else{var e=h-i.width,s=1*i.width/h,o=parseInt(i.width*s),l=0,r=i.width-o,c=r/e;d.css({width:o+"px","background-color":i.scroll_x_thumb_color,"border-radius":i.scroll_x_thumb_radius+"px"});var p=0,m=0,f=0,u=0,x=!1;d.on("mousedown",function(i){m=i.pageX,u=l,p=t,x=!0,n.addClass("not-selected")}),$(window).on("mousemove",function(i){x&&(f=i.pageX,t=p+(m-f)/c,(l=u+f-m)>=r?(l=r,t=-e):l<=0&&(l=0,t=0),d.css({"margin-left":l+"px"}),n.css({"margin-left":t+"px"}))}),$(window).on("mouseup",function(){x=!1,n.removeClass("not-selected")})}}(),m.scrollX=!0):a.css("display","none")}}),$.fn.extend({selectorInit:function(t,i){var e=$.extend({},{width:280,expandType:"touch",optionsHeight:200,text:{tId:"demo",tName:"demo"},options:[{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"}]},t),s="";s+='<div class="pan-text" tId="'+e.text.tId+'">'+e.text.tName+"</div>",s+='<div class="pan-btn"><span></span></div>',s+='<div class="pan-scroll-box">';for(var o in e.options)s+='<div class="item-li" tId="'+e.options[o].tId+'">'+e.options[o].tName+"</div>";s+="</div>",$(this).html(s);var n=$(this);$(this).css("width",e.width+"px"),n.find(".pan-text").css({width:e.width-36+"px"});var a=$(this).find(".pan-scroll-box");a.panScrollBar({width:e.width,height:e.optionsHeight}),a.css({position:"absolute",left:"-1px",top:"29px","background-color":"#fff","z-index":"10001",border:"1px solid #80bc71",display:"none"}),"click"==e.expandType?n.on("click",function(){a.css("display","block")}):"touch"==e.expandType&&n.on("mouseenter",function(){a.css("display","block")}),n.on("mouseleave",function(){a.css("display","none")}),n.on("click",".item-li",function(){if(n.find(".pan-text").html($(this).html()),n.find(".pan-text").attr("tId",$(this).attr("tId")),a.css("display","none"),"function"==typeof i){var t=n.find(".pan-text").attr("tId"),e=n.find(".pan-text").html();i({tId:t,tName:e})}})}}),$("#test_selector").selectorInit({width:280,expandType:"touch",optionsULHeight:360,text:{tId:"上海",tName:"上海"},options:[{tId:"上海",tName:"上海"},{tId:"北京",tName:"北京"},{tId:"深圳",tName:"深圳"},{tId:"江苏",tName:"江苏"},{tId:"山东",tName:"山东"},{tId:"广东",tName:"广东"},{tId:"江西",tName:"江西"},{tId:"南京",tName:"南京"},{tId:"江苏",tName:"江苏"},{tId:"陕西",tName:"陕西"},{tId:"河南",tName:"河南"},{tId:"河北",tName:"河北"},{tId:"山西",tName:"山西"},{tId:"天津",tName:"天津"}]},function(t){console.log(JSON.stringify(t))}),$("#test_selector1").selectorInit({width:120,text:{tId:"火星",tName:"火星"},options:[{tId:"火星",tName:"火星"},{tId:"木星",tName:"木星"},{tId:"水星",tName:"水星"},{tId:"金星",tName:"金星"},{tId:"天王星",tName:"天王星"},{tId:"海王星",tName:"海王星"},{tId:"冥王星",tName:"冥王星"},{tId:"地球",tName:"地球"},{tId:"太阳",tName:"太阳"}]},function(t){console.log(JSON.stringify(t))}),$.fn.extend({ZoomInit:function(t){function i(t){return{filter:"alpha(opacity=50)","-moz-opacity":t+="","-khtml-opacity":t,opacity:t}}var e=$(this);$(this).append('<div class="imageBg"></div>'),$imageBg=e.find("div.imageBg");var s=$(this).find("img");t.imageWidth&&"number"==typeof t.imageWidth&&s.css("width",t.imageWidth+"px"),t.imageHeight&&"number"==typeof t.imageHeight&&s.css("height",t.imageHeight+"px");var o=2;t.scale&&"number"==typeof t.scale&&(o=t.scale);var n=$(document).width(),a=$(document).height(),l=s.width(),d=s.height(),r=e.offset().left,c=e.offset().top,h=l*o,p=d*o;(h>=n||p>=a)&&(p=1*d/l*(h=.8*n));var m=(n-h)/2,f=(a-p)/2;e.css("width",l+"px"),e.css("height",d+"px"),$imageBg.css({width:"100%",height:"100%",position:"absolute",left:"0",top:"0","background-color":"#666",display:"none","z-index":1e3});var u=!1;s.on("click",function(){u?(r=e.offset().left,c=e.offset().top,$imageBg.animate(i(0),250,function(){$imageBg.css("display","none")}),s.animate({width:l+"px",height:d+"px",left:r+"px",top:c+"px"},250,function(){u=!1,s.css("position","static")})):(s.css("position","absolute"),s.css("z-index","1001"),console.log(s.offset().top),$imageBg.css("display","block"),$imageBg.css(i(0)),$imageBg.animate(i(.5),250),s.animate({width:h+"px",height:p+"px",left:m+"px",top:f+"px"},250,function(){u=!0}))}),s.on("mouseenter",function(){u?s.css("cursor","zoom-out"):s.css("cursor","zoom-in")})}}),$.fn.extend({panDateTimePicker:function(t){function i(t,i){h.find(".year-text").html(t),h.find(".month-text").html(i),e[2]=t%400==0||t%4==0&&t%100!=0?29:28;for(var s=function(t,i,e){return new Date(t+"/"+i+"/"+e).getDay()}(t,i,1),o="",n=e[i],a=0;a<7;a++)a<s&&(o+='<span style="visibility:hidden">&nbsp;</span>');for(a=1;a<=n;a++)o+="<span>"+a+"</span>";h.find(".picker-days").html(o)}var e=[null,31,29,31,30,31,30,31,31,30,31,30,31],s=["日","一","二","三","四","五","六"],o=$.extend({},{start_year:1990,end_year:2030,format:"mm/dd/yyyy"},t),n=new Date,a=n.getFullYear(),l=n.getMonth()+1;n.getDate();$(this).html('<label class="date-show"></label>'),$(this).append('<div class="picker-box"></div>');var d='<div class="picker-header">';d+='<div class="left-btn"></div>',d+='<div class="year-selector"><a class="year-text">2017</a><span class="year-btn"></span>',d+='<div class="pan-scroll-box" id="year-list"></div></div>',d+='<div class="month-selector"><a class="month-text">09</a><span class="month-btn"></span>',d+='<div class="pan-scroll-box" id="month-list"></div></div>',d+='<div class="right-btn"></div>',d+="</div>",d+='<div class="picker-week">';for(var r=0;r<7;r++)d+="<span>"+s[r]+"</span>";d+="</div>",d+='<div class="picker-days"></div>',$(this).find(".picker-box").html(d),d="";var c=0;for(r=o.start_year;r<=o.end_year;r++)d+='<div class="item-li" style="width:60px;">'+r+"</div>",c++;$(this).find("#year-list").html(d),d="";for(r=1;r<=12;r++)d+='<div class="item-li" style="width:45px;">'+r+"</div>";$(this).find("#month-list").html(d);var h=$(this),p=$(this).find("#year-list"),m=240<20*c?240:20*c;p.panScrollBar({width:60,height:m}),p.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px","z-index":"20001",display:"none"});var f=$(this).find("#month-list");f.panScrollBar({width:45,height:240}),f.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px","z-index":"20001",display:"none"}),i(a,l),$(this).find(".year-selector").on("mouseenter",function(){p.css("display","block")}),$(this).find(".year-selector").on("mouseleave",function(){p.css("display","none")}),p.on("click",".item-li",function(){var t=$(this).html(),e=h.find(".month-text").html();h.find(".year-text").html(t),p.css("display","none"),i(parseInt(t),parseInt(e))}),$(this).find(".month-selector").on("mouseenter",function(){f.css("display","block")}),$(this).find(".month-selector").on("mouseleave",function(){f.css("display","none")}),h.find(".picker-box").css({display:"none"}),f.on("click",".item-li",function(){var t=h.find(".year-text").html(),e=$(this).html();h.find(".month-text").html(e),f.css("display","none"),i(parseInt(t),parseInt(e))}),$(this).find(".picker-days").on("click","span",function(){var t=h.find(".year-text").html(),i=h.find(".month-text").html(),e=$(this).html();h.find(".date-show").html(function(t,i,e){"string"==typeof i&&(i=parseInt(i)),"string"==typeof e&&(e=parseInt(e)),i=i<10?"0"+i:i,e=e<10?"0"+e:e;var s="";return"yyyy-mm-dd"==o.format?s=t+"-"+i+"-"+e:"mm/dd/yyyy"==o.format?s=i+"/"+e+"/"+t:"yyyy/mm/dd"==o.format&&(s=t+"/"+i+"/"+e),s}(t,i,e)),h.find(".picker-box").css("display","none")}),$(this).find(".date-show").on("click",function(){h.find(".picker-box").css("display","block")})}});