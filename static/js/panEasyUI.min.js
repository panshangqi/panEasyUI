
$.fn.extend({onMouseWheel:function(a){$(this).on("mousewheel DOMMouseScroll",function(b){"function"==typeof b.preventDefault&&b.preventDefault();var c=b.originalEvent.detail,d=b.originalEvent.wheelDelta,e="undefined"==typeof d?-c:d;return a(b,e),!1})}}),$.fn.extend({panScrollBar:function(a){function b(){j+=r,n+=u,r>0&&j>s?clearInterval(p):0>r&&s>j&&clearInterval(p),g.css({"margin-top":j+"px"}),i.css({"margin-top":n+"px"})}var c={width:400,height:350,barWidth:5,barColor:"#ddd",thumbColor:"#aaa"},d=$.extend({},c,a),e=$(this).html();console.log(e);var f='<div class="scroll-content"></div>';f+='<div class="scroll-bar"><div class="scrollbar-thumb"></div></div>',$(this).html(f);var g=$(this).find(".scroll-content"),h=$(this).find(".scroll-bar"),i=h.find(".scrollbar-thumb");g.html(e),$(this).css({width:d.width+"px",height:d.height+"px",overflow:"hidden"}),g.css({}),h.css({height:d.height+"px",width:d.barWidth+"px",left:d.width-d.barWidth+"px","background-color":d.barColor});var j=0,k=$(this).height()-g.height()+1,l=1*d.height/g.height(),m=parseInt(l*d.height),n=0,o=d.height-m;if(i.css({height:m+"px","background-color":d.thumbColor}),g.height()<=d.height)return h.css("display","none"),void console.log("------>"+g.height());var p=null,q=1,r=2,s=0,t=-(o*r*1/k),u=t;$(this).onMouseWheel(function(a,c){if(p&&clearInterval(p),c>0){if(r=2,s=j+250,j>=-1)return;s>-1&&(s=-1),q=1,u=-t,p=setInterval(b,q)}else{if(r=-2,s=j-250,k>=j)return;k>s&&(s=k),q=1,u=t,p=setInterval(b,q)}});var v=0,w=0;i.on("mousedown",function(a){v=a.pageX,console.log(v)}),i.on("mousemove",function(a){w=a.pageY,console.log(w-v)})}}),$("#test_scroll").panScrollBar({width:600}),$.fn.extend({selectorInit:function(a,b){var c={width:280,expandType:"touch",optionsULHeight:200,text:{tId:"demo",tName:"demo"},options:[{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"},{tId:"demo",tName:"demo"}]},d=$.extend({},c,a),e="";e+='<div class="pan-text" tId="'+d.text.tId+'">',e+=d.text.tName,e+="</div>",e+='<div class="pan-btn"><span></span></div>',e+='<div class="pan-select-ul">',e+='<div class="pan-scroll-box"><ul>';for(var f in d.options)e+='<li tId="'+d.options[f].tId+'">',e+=d.options[f].tName+"</li>";e+="</ul></div></div>",$(this).html(e);var g=$(this);$(this).css("width",d.width+"px"),g.find(".pan-text").css({width:d.width-36+"px"});var h=$(this).find(".pan-select-ul"),i=$(this).find(".pan-scroll-box");i.panScrollBar({width:d.width,height:d.optionsULHeight}),i.find("ul").css({width:d.width+"px"});var j=i.find("ul").height();j<d.optionsULHeight&&(d.optionsULHeight=j),console.log("ul-->"+i.find("ul").height()),h.css({width:d.width+"px",height:d.optionsULHeight+"px",display:"none"}),"click"==d.expandType?g.on("click",function(){h.css("display","block")}):"touch"==d.expandType&&g.on("mouseenter",function(){h.css("display","block")}),g.on("mouseleave",function(){h.css("display","none")}),g.on("click","ul li",function(){if(g.find(".pan-text").html($(this).html()),g.find(".pan-text").attr("tId",$(this).attr("tId")),h.css("display","none"),"function"==typeof b){var a=g.find(".pan-text").attr("tId"),c=g.find(".pan-text").html(),d={tId:a,tName:c};b(d)}})}}),$("#test_selector").selectorInit({width:280,expandType:"touch",optionsULHeight:360,text:{tId:"上海",tName:"上海"},options:[{tId:"上海",tName:"上海"},{tId:"北京",tName:"北京"},{tId:"深圳",tName:"深圳"},{tId:"江苏",tName:"江苏"},{tId:"山东",tName:"山东"},{tId:"广东",tName:"广东"},{tId:"江西",tName:"江西"},{tId:"南京",tName:"南京"},{tId:"江苏",tName:"江苏"},{tId:"陕西",tName:"陕西"},{tId:"河南",tName:"河南"},{tId:"河北",tName:"河北"},{tId:"山西",tName:"山西"},{tId:"天津",tName:"天津"}]},function(a){console.log(JSON.stringify(a))}),$("#test_selector1").selectorInit({width:120,text:{tId:"火星",tName:"火星"},options:[{tId:"火星",tName:"火星"},{tId:"木星",tName:"木星"},{tId:"水星",tName:"水星"},{tId:"金星",tName:"金星"},{tId:"天王星",tName:"天王星"},{tId:"海王星",tName:"海王星"},{tId:"冥王星",tName:"冥王星"},{tId:"地球",tName:"地球"},{tId:"太阳",tName:"太阳"}]},function(a){console.log(JSON.stringify(a))}),$.fn.extend({ZoomInit:function(a){function b(a){a+="";var b={filter:"alpha(opacity=50)","-moz-opacity":a,"-khtml-opacity":a,opacity:a};return b}var c=$(this),d='<div class="imageBg"></div>';$(this).append(d),$imageBg=c.find("div.imageBg");var e=$(this).find("img");a.imageWidth&&"number"==typeof a.imageWidth&&e.css("width",a.imageWidth+"px"),a.imageHeight&&"number"==typeof a.imageHeight&&e.css("height",a.imageHeight+"px");var f=2;a.scale&&"number"==typeof a.scale&&(f=a.scale);var g=$(document).width(),h=$(document).height(),i=e.width(),j=e.height(),k=c.offset().left,l=c.offset().top,m=i*f,n=j*f;(m>=g||n>=h)&&(m=.8*g,n=1*j/i*m);var o=(g-m)/2,p=(h-n)/2;c.css("width",i+"px"),c.css("height",j+"px"),$imageBg.css({width:"100%",height:"100%",position:"absolute",left:"0",top:"0","background-color":"#666",display:"none","z-index":1e3});var q=!1;e.on("click",function(){q?(k=c.offset().left,l=c.offset().top,$imageBg.animate(b(0),250,function(){$imageBg.css("display","none")}),e.animate({width:i+"px",height:j+"px",left:k+"px",top:l+"px"},250,function(){q=!1,e.css("position","static")})):(e.css("position","absolute"),e.css("z-index","1001"),console.log(e.offset().top),$imageBg.css("display","block"),$imageBg.css(b(0)),$imageBg.animate(b(.5),250),e.animate({width:m+"px",height:n+"px",left:o+"px",top:p+"px"},250,function(){q=!0}))}),e.on("mouseenter",function(){q?e.css("cursor","zoom-out"):e.css("cursor","zoom-in")})}}),$("#test_zoomify").ZoomInit({imageWidth:360,imageHeight:"auto",scale:3.1}),$("#test_zoomify1").ZoomInit({imageWidth:100,imageHeight:"auto",scale:3.1}),$.fn.extend({panDateTimePicker:function(a){function b(a,b){n.find(".year-text").html(a),n.find(".month-text").html(b),a%400==0||a%4==0&&a%100!=0?e[2]=29:e[2]=28;for(var d=c(a,b,1),f="",g=e[b],h=0;7>h;h++)d>h&&(f+='<span style="visibility:hidden">&nbsp;</span>');for(var h=1;g>=h;h++)f+="<span>"+h+"</span>";n.find(".picker-days").html(f)}function c(a,b,c){var d=new Date(a+"/"+b+"/"+c),e=d.getDay();return e}function d(a,b,c){"string"==typeof b&&(b=parseInt(b)),"string"==typeof c&&(c=parseInt(c)),b=10>b?"0"+b:b,c=10>c?"0"+c:c;var d="";return"yyyy-mm-dd"==h.format?d=a+"-"+b+"-"+c:"mm/dd/yyyy"==h.format?d=b+"/"+c+"/"+a:"yyyy/mm/dd"==h.format&&(d=a+"/"+b+"/"+c),d}var e=[null,31,29,31,30,31,30,31,31,30,31,30,31],f=["日","一","二","三","四","五","六"],g={start_year:1990,end_year:2030,format:"mm/dd/yyyy"},h=$.extend({},g,a);console.log(JSON.stringify(h));var i=new Date,j=i.getFullYear(),k=i.getMonth()+1;i.getDate();$(this).html('<label class="date-show"></label>'),$(this).append('<div class="picker-box"></div>');var l='<div class="picker-header">';l+='<div class="left-btn"></div>',l+='<div class="year-selector"><a class="year-text">2017</a><span class="year-btn"></span>',l+='<div class="pan-scroll-box" id="year-list"></div></div>',l+='<div class="month-selector"><a class="month-text">09</a><span class="month-btn"></span>',l+='<div class="pan-scroll-box" id="month-list"></div></div>',l+='<div class="right-btn"></div>',l+="</div>",l+='<div class="picker-week">';for(var m=0;7>m;m++)l+="<span>"+f[m]+"</span>";l+="</div>",l+='<div class="picker-days"></div>',$(this).find(".picker-box").html(l),l="";for(var m=h.start_year;m<=h.end_year;m++)l+="<li>"+m+"</li>";$(this).find("#year-list").html(l),l="";for(var m=1;12>=m;m++)l+="<li>"+m+"</li>";$(this).find("#month-list").html(l);var n=$(this),o=$(this).find("#year-list");o.panScrollBar({width:60,height:240}),o.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px",display:"none"});var p=$(this).find("#month-list");p.panScrollBar({width:45,height:240}),p.css({position:"absolute",border:"1px solid #80bc71","background-color":"#fff",top:"20px",left:"-5px",display:"none"}),b(j,k),$(this).find(".year-selector").on("mouseenter",function(){o.css("display","block")}),$(this).find(".year-selector").on("mouseleave",function(){o.css("display","none")}),o.on("click","li",function(){var a=$(this).html(),c=n.find(".month-text").html();n.find(".year-text").html(a),o.css("display","none"),b(parseInt(a),parseInt(c))}),$(this).find(".month-selector").on("mouseenter",function(){p.css("display","block")}),$(this).find(".month-selector").on("mouseleave",function(){p.css("display","none")}),n.find(".picker-box").css({display:"none"}),p.on("click","li",function(){var a=n.find(".year-text").html(),c=$(this).html();n.find(".month-text").html(c),p.css("display","none"),b(parseInt(a),parseInt(c))}),$(this).find(".picker-days").on("click","span",function(){var a=n.find(".year-text").html(),b=n.find(".month-text").html(),c=$(this).html();n.find(".date-show").html(d(a,b,c)),n.find(".picker-box").css("display","none")}),$(this).find(".date-show").on("click",function(){n.find(".picker-box").css("display","block")})}}),$("#test_datetime").panDateTimePicker({start_year:1990,end_year:2025,format:"mm/dd/yyyy"}),$("#test_pansq").panScrollBar({height:100});