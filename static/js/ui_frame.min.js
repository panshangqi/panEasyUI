

function getCookie(t){var o=document.cookie.match("\\b"+t+"=([^;]*)\\b");return o?o[1]:void 0}var httpDialogTip=function(){$(document.body).append('<div style="position: fixed;width:120px;height:25px;background-color: #8db02e;left:50%;top:-26px;z-index:100001;margin-left: -60px;text-align: center;color:#fff;line-height: 25px;font-size: 13px" class="http_dialog">请求成功</div>');var t=$(document.body).find(".http_dialog");this.showDialog=function(o,n){var i;1==o?t.html("请求成功"):(t.html("请求失败"),t.css("background-color","#f05151")),i=n,t.animate({top:"0"},300,function(){setTimeout(function(){t.animate({top:"-26px"},200,function(){"function"==typeof i&&i()})},900)})}},tipDlg=new httpDialogTip;$.extend({window:{http:{post:function(t,o,n,i,e,c){o._xsrf=getCookie("_xsrf"),i=void 0===i||i,$.ajax({type:"post",url:t,data:o,datatype:"json",async:!1,success:function(t){i?tipDlg.showDialog(!0,function(){"function"==typeof n&&n(t)}):"function"==typeof n&&n(t)},complete:function(){"function"==typeof e&&e()},error:function(){tipDlg.showDialog(!1,function(){"function"==typeof c&&c()})}})},post_file:function(t,o,n,i,e,c){i=void 0===i||i,$.ajax({url:t,type:"post",data:o,async:!0,cache:!1,contentType:!1,processData:!1,success:function(t){i?tipDlg.showDialog(!0,function(){"function"==typeof n&&n(t)}):"function"==typeof n&&n(t)},complete:function(){"function"==typeof e&&e()},error:function(){i?tipDlg.showDialog(!0,function(){"function"==typeof c&&c()}):"function"==typeof c&&c()}})}}}});